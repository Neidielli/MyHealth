<!DOCTYPE html>
<html>
    <head>
        <title>Nova Vacina</title>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="CSS/css_geral.css">
        <link rel="stylesheet" type="text/css" href="CSS/Nova_vacina.css">
        
        <script type="module">
            import {db} from './config/firebase.js'
            import {addDoc, collection} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore.js";
        
            // importa as informações dos campos na home
            const getNome = () => {
                return document.getElementById("nome-vacina").value
            }
            const getDose = () => {
                return document.getElementById("dose").value
            }
            const getData = () => {
                return document.getElementById("data-vacina").value
            }
            const getImg = () => {
                return document.getElementById("comprovante").value
            }
            const getProxDose = () => {
                return document.getElementById("proxima-vacina").value
            }
        
            const setNome = (nome) => {
                return document.getElementById("nome-vacina").value = nome
            }
            const setDose = (dose) => {
                return document.getElementById("dose").value = dose
            }
            const setData = (data) => {
                return document.getElementById("data-vacina").value = data
            }
            const setImg = (img) => {
                return document.getElementById("selecionar-imagem").value = img
            }
            const setProxDose = (proxDose) => {
                return document.getElementById("proxima-vacina").value = proxDose
            }
        
            const cadastrar = () => {
                addDoc( collection(db, "vacinas"), {
                    nome: getNome(),
                    dose: getDose(),
                    data: getData(),
                    img: getImg(),
                    proxDose: getProxDose()
                })
                .then((result) => {
                    console.log(JSON.stringify(result))
                    window.location.href = "Home.html"
                })
                .catch((error) => {
                    console.log("Erro ao persistir dados: " + error)
                })
            }
        
        
            window.onload = () => {
                document.getElementById("botao-cadastrar").addEventListener('click', cadastrar)
            }
        </script>
    </head>

    <body>
        <header>

            <div id="menu">

                <div class="item-menu logo" onclick="window.location.href='Home.html';">
                    <img class="seringa-icon" src="Imagens/vacina-icone.png" alt="">
                    <span>MyHealth</span>
                </div>
                
                <div class="item-menu">
                    <button onclick="window.location.href='Home.html';">Minhas vacinas</button>
                    <button onclick="window.location.href='Inicial.html';">Logout</button>
                </div>

            </div> <!-- FIM MENU -->

        </header>

        <main>

            <fieldset>
                <div class="div-labels">
                    <div class="left">
                        <label for="data-vacina">Data de vacinação</label>
                    </div>
                    <div class="rigth">
                        <input type="date" name="data" id="data-vacina">
                    </div>
                </div>

                <div class="div-labels">
                    <div class="left">
                        <label for="nome-vacina">Vacina</label>
                    </div>
                    <div class="rigth">
                        <input type="text" name="vacina" id="nome-vacina">
                    </div>
                </div>

                <div class="div-labels">
                    <div class="left">
                        <label for="dose">Dose</label>
                    </div>

                    <div class="rigth">
                        <input class="radio" type="radio" name="dose" id="dose" value="1-dose"><label>1a. dose</label>
                        <input class="radio" type="radio" name="dose" id="dose" value="2-dose"><label>2a. dose</label>
                        <input class="radio" type="radio" name="dose" id="dose" value="3-dose"><label>3a. dose</label>
                        <input class="radio" type="radio" name="dose" id="dose" value="reforo"><label>Reforço</label>
                        <input class="radio" type="radio" name="dose" id="dose" value="doseUnica"><label>Dose única</label>
                    </div>
                    
                </div>

                <div class="div-labels">
                    <div class="left">
                        <label for="comprovante">Comprovante da vacina</label>
                    </div>
                    
                    <div class="rigth">
                        <input type="text" name="comprovante" id="comprovante">
                    </div>
                </div>


                <div class="div-labels">
                    <div class="left">
                        <label for="proxima-vacina">Próxima vacinação</label>
                    </div>
                    
                    <div class="rigth">
                        <input type="date" name="data" id="proxima-vacina">
                    </div>
                </div>

            </fieldset>

            <div id="conteudo">
                <button class="botao-padrao" id="botao-cadastrar">Cadastrar</button>
            </div>

        </main>
        
    <!-- JS -->
    

    </body>

</html>